box: clojure:latest

build:
  steps:
    - script:
      name: install-nodejs
      code: |
        apt-get update
        apt-get install -y make gcc g++ python nodejs

    - script:
      name: test-client
      code: |
        cd webclient && make test

    - script:
      name: test-app
      code: |
        cd my-stories && lein test

assemble:
  steps:
    - script:
      name: create-jar
      code: make server

    - script:
      name: create-image
      code: echo "docker build . :)"
