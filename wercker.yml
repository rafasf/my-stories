box: clojure:alpine

app-build:
  steps:
    - script:
      name: test-app
      code: |
        cd my-stories && lein test


webclient-build:
  steps:
    - script:
      name: install-nodejs
      code: apk add --update --no-cache make gcc g++ python nodejs

    - script:
      name: test-client
      code: |
        cd webclient && make test


assemble:
  steps:
    - script:
      name: create-jar
      code: make server
